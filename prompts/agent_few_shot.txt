user -> {'text': 'What is the average churn rate and count for customers  in service city nmc nvu awi sfu bir and kcy. Provide a plot of this for me?'}
--------------------------------------------------------------------------------
model -> {'function_call': {'name': 'question_reformer', 'args': {'user_question': 'What is the average churn rate and count for customers  in service city nmc nvu awi sfu bir and kcy. Provide a plot of this for me?'}}}
--------------------------------------------------------------------------------
user -> {'function_response': {'name': 'question_reformer', 'response': {'result': '1. "Get the average churn rate and count of customers in service cities nmc, nvu, awi, sfu, bir, and kcy." \n
																					2. "Create a plot showing the average churn rate for customers in service cities nmc, nvu, awi, sfu, bir, and kcy." \n
																					3. "Create a plot showing the count of customers in service cities nmc, nvu, awi, sfu, bir, and kcy." \n'}}}
--------------------------------------------------------------------------------
model -> {'function_call': {'name': 'generate_sql', 'args': {'user_question': 'Get the average churn rate and count of customers in service cities nmc, nvu, awi, sfu, bir, and kcy.'}}}
--------------------------------------------------------------------------------
user -> {'function_response': {'name': 'generate_sql', 'response': {'result': "SELECT SAFE_CAST(service_city AS STRING), AVG(churn) AS avg_churn, COUNT(customerid) AS customer_count FROM `eco-sector-422622-b5.telecom_churn.customer_data` WHERE service_city IN ('nmc', 'nvu', 'awi', 'sfu', 'bir', 'kcy') GROUP BY 1"}}}
--------------------------------------------------------------------------------
model -> {'function_call': {'name': 'execute_sql', 'args': {'user_question': 'Get the average churn rate and count of customers in service cities nmc, nvu, awi, sfu, bir, and kcy.', 'output_mode': 'json', 'sql_generated': "SELECT SAFE_CAST(service_city AS STRING), AVG(churn) AS avg_churn, COUNT(customerid) AS customer_count FROM `eco-sector-422622-b5.telecom_churn.customer_data` WHERE service_city IN (\\'nmc\\', \\'nvu\\', \\'awi\\', \\'sfu\\', \\'bir\\', \\'kcy\\') GROUP BY 1"}}}
--------------------------------------------------------------------------------
user -> {'function_response': {'name': 'execute_sql', 'response': {'result': '[{"f0_":"kcy","avg_churn":0.261682243,"customer_count":107},{"f0_":"awi","avg_churn":0.2857142857,"customer_count":7},{"f0_":"bir","avg_churn":0.4285714286,"customer_count":7},{"f0_":"nvu","avg_churn":0.0,"customer_count":2},{"f0_":"nmc","avg_churn":0.0,"customer_count":4},{"f0_":"sfu","avg_churn":0.0,"customer_count":1}]'}}}
--------------------------------------------------------------------------------
model -> {'function_call': {'name': 'create_visualization', 'args': {'user_question': 'Create a plot showing the average churn rate for customers in service cities nmc, nvu, awi, sfu, bir, and kcy.', 'sql_generated': "SELECT SAFE_CAST(service_city AS STRING), AVG(churn) AS avg_churn, COUNT(customerid) AS customer_count FROM `eco-sector-422622-b5.telecom_churn.customer_data` WHERE service_city IN (\\\\\\'nmc\\\\\\', \\\\\\'nvu\\\\\\', \\\\\\'awi\\\\\\', \\\\\\'sfu\\\\\\', \\\\\\'bir\\\\\\', \\\\\\'kcy\\\\\\') GROUP BY 1"}}}
--------------------------------------------------------------------------------
user -> {'function_response': {'name': 'create_visualization', 'response': {'result': 'Plot created successfully'}}}
--------------------------------------------------------------------------------
model -> {'function_call': {'name': 'create_visualization', 'args': {'user_question': 'Create a plot showing the customer count in service cities nmc, nvu, awi, sfu, bir, and kcy.', 'sql_generated': "SELECT SAFE_CAST(service_city AS STRING), AVG(churn) AS avg_churn, COUNT(customerid) AS customer_count FROM `eco-sector-422622-b5.telecom_churn.customer_data` WHERE service_city IN (\\\\\\'nmc\\\\\\', \\\\\\'nvu\\\\\\', \\\\\\'awi\\\\\\', \\\\\\'sfu\\\\\\', \\\\\\'bir\\\\\\', \\\\\\'kcy\\\\\\') GROUP BY 1"}}}
--------------------------------------------------------------------------------
user -> {'function_response': {'name': 'create_visualization', 'response': {'result': 'Plot created successfully'}}}
--------------------------------------------------------------------------------
model -> {'text': 'The average churn rate and count of customers for service cities nmc, nvu, awi, sfu, bir, and kcy is:\n\n| service_city | avg_churn | customer_count |\n|---|---|---|\n| kcy | 0.261682243 | 107 |\n| awi | 0.2857142857 | 7 |\n| bir | 0.4285714286 | 7 |\n| nvu | 0.0 | 2 |\n| nmc | 0.0 | 4 |\n| sfu | 0.0 | 1 |\n\nA plot of this data has been created. \n'}